"use strict";var __awaiter=this&&this.__awaiter||function(t,n,u,s){return new(u=u||Promise)(function(r,e){function o(t){try{i(s.next(t))}catch(t){e(t)}}function a(t){try{i(s.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?r(t.value):((e=t.value)instanceof u?e:new u(function(t){t(e)})).then(o,a)}i((s=s.apply(t,n||[])).next())})},__generator=this&&this.__generator||function(r,o){var a,i,n,u={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(a)throw new TypeError("Generator is already executing.");for(;u;)try{if(a=1,i&&(n=2&e[0]?i.return:e[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,e[1])).done)return n;switch(i=0,(e=n?[2&e[0],n.value]:e)[0]){case 0:case 1:n=e;break;case 4:return u.label++,{value:e[1],done:!1};case 5:u.label++,i=e[1],e=[0];continue;case 7:e=u.ops.pop(),u.trys.pop();continue;default:if(!(n=0<(n=u.trys).length&&n[n.length-1])&&(6===e[0]||2===e[0])){u=0;continue}if(3===e[0]&&(!n||e[1]>n[0]&&e[1]<n[3])){u.label=e[1];break}if(6===e[0]&&u.label<n[1]){u.label=n[1],n=e;break}if(n&&u.label<n[2]){u.label=n[2],u.ops.push(e);break}n[2]&&u.ops.pop(),u.trys.pop();continue}e=o.call(r,u)}catch(t){e=[6,t],i=0}finally{a=n=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}},__importDefault=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var fastify_1=__importDefault(require("fastify")),fastify_static_1=__importDefault(require("fastify-static")),fastify_formbody_1=__importDefault(require("fastify-formbody")),point_of_view_1=__importDefault(require("point-of-view")),pug_1=__importDefault(require("pug")),path_1=__importDefault(require("path")),dotenv_1=__importDefault(require("dotenv")),routes_1=require("./routes"),staticRoot="public";dotenv_1.default.config();var app=fastify_1.default({logger:!0});app.register(fastify_formbody_1.default),app.register(fastify_static_1.default,{root:path_1.default.join(__dirname,staticRoot),prefixAvoidTrailingSlash:!0}),app.register(point_of_view_1.default,{engine:{pug:pug_1.default},root:path_1.default.join(__dirname,staticRoot)}),app.route(routes_1.homePageRoute),app.route(routes_1.folderPageRoute),app.route(routes_1.getFileRoute),app.route(routes_1.copyFileRoute),app.route(routes_1.moveFileRoute);var port=process.env.PORT,host=process.env.HOST,start=function(){return __awaiter(void 0,void 0,void 0,function(){var e,r,o,a;return __generator(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,app.listen(port,host)];case 1:return t.sent(),"object"==typeof(a=app.server.address())?(e=a.family,r=a.address,o=a.port,[2,app.log.info("Server up and running - protocol: "+e+", host: "+r+", port: "+o)]):[2,app.log.info("Server up and running - "+a)];case 2:return a=t.sent(),app.log.error(a),[2,process.exit(1)];case 3:return[2]}})})};start();
//# sourceMappingURL=app.js.map
