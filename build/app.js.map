{"version":3,"sources":["../src/app.ts"],"names":["fastify_1","__importDefault","require","fastify_static_1","fastify_formbody_1","point_of_view_1","pug_1","path_1","dotenv_1","routes_1","staticRoot","default","config","app","logger","register","root","join","__dirname","prefixAvoidTrailingSlash","engine","pug","route","homePageRoute","folderPageRoute","getFileRoute","copyFileRoute","moveFileRoute","port","process","env","PORT","host","HOST","start","__awaiter","listen","_a","sent","info","server","address","family","port_1","log","error","err_1","exit"],"mappings":"wiDAAA,IAAAA,UAAAC,gBAAAC,QAAA,YACAC,iBAAAF,gBAAAC,QAAA,mBACAE,mBAAAH,gBAAAC,QAAA,qBACAG,gBAAAJ,gBAAAC,QAAA,kBACAI,MAAAL,gBAAAC,QAAA,QACAK,OAAAN,gBAAAC,QAAA,SACAM,SAAAP,gBAAAC,QAAA,WACAO,SAAAP,QAAA,YAQMQ,WAAa,SAEnBF,SAAAG,QAAOC,SAEP,IAAMC,IAAuBb,UAAAW,QAAQ,CAAEG,QAAQ,IAE/CD,IAAIE,SAASX,mBAAAO,SAEbE,IAAIE,SAASZ,iBAAAQ,QAAe,CAC1BK,KAAMT,OAAAI,QAAKM,KAAKC,UAAWR,YAC3BS,0BAA0B,IAG5BN,IAAIE,SAASV,gBAAAM,QAAa,CACxBS,OAAQ,CACNC,IAAGf,MAAAK,SAELK,KAAMT,OAAAI,QAAKM,KAAKC,UAAWR,cAG7BG,IAAIS,MAAMb,SAAAc,eACVV,IAAIS,MAAMb,SAAAe,iBACVX,IAAIS,MAAMb,SAAAgB,cACVZ,IAAIS,MAAMb,SAAAiB,eACVb,IAAIS,MAAMb,SAAAkB,eAEV,IAAMC,KAAOC,QAAQC,IAAIC,KAEnBC,KAAOH,QAAQC,IAAIG,KAEnBC,MAAQ,WAAA,OAAAC,eAAA,OAAA,OAAA,EAAA,W,uEAEV,O,sBAAA,CAAA,EAAMtB,IAAIuB,OAAOR,KAAMI,O,OAIvB,OAJAK,EAAAC,OAIoB,iBAFdC,EAAO1B,IAAI2B,OAAOC,YAGdC,EAA0BH,EAAIG,OAAtBD,EAAkBF,EAAIE,QAAbE,EAASJ,EAAIX,KACtC,CAAA,EAAOf,IAAI+B,IAAIL,KACb,qCAAqCG,EAAM,WAAWD,EAAO,WAAWE,KAI5E,CAAA,EAAO9B,IAAI+B,IAAIL,KAAK,2BAA2BA,I,OAI/C,O,WAFA1B,IAAI+B,IAAIC,MAAMC,GAEd,CAAA,EAAOjB,QAAQkB,KAAK,I,uBAIxBb","file":"app.js","sourcesContent":["import Fastify, { FastifyInstance } from \"fastify\";\nimport fastifyStatic from \"fastify-static\";\nimport bodyParser from \"fastify-formbody\";\nimport pointOfView from \"point-of-view\";\nimport pug from \"pug\";\nimport path from \"path\";\nimport dotenv from \"dotenv\";\nimport {\n  getFileRoute,\n  folderPageRoute,\n  copyFileRoute,\n  moveFileRoute,\n  homePageRoute,\n} from \"./routes\";\n\nconst staticRoot = \"public\";\n\ndotenv.config();\n\nconst app: FastifyInstance = Fastify({ logger: true });\n\napp.register(bodyParser);\n\napp.register(fastifyStatic, {\n  root: path.join(__dirname, staticRoot),\n  prefixAvoidTrailingSlash: true,\n});\n\napp.register(pointOfView, {\n  engine: {\n    pug,\n  },\n  root: path.join(__dirname, staticRoot),\n});\n\napp.route(homePageRoute);\napp.route(folderPageRoute);\napp.route(getFileRoute);\napp.route(copyFileRoute);\napp.route(moveFileRoute);\n\nconst port = process.env.PORT;\n\nconst host = process.env.HOST;\n\nconst start = async () => {\n  try {\n    await app.listen(port, host);\n\n    const info = app.server.address();\n\n    if (typeof info === \"object\") {\n      const { family, address, port } = info;\n      return app.log.info(\n        `Server up and running - protocol: ${family}, host: ${address}, port: ${port}`\n      );\n    }\n\n    return app.log.info(`Server up and running - ${info}`);\n  } catch (err) {\n    app.log.error(err);\n\n    return process.exit(1);\n  }\n};\n\nstart();\n"]}